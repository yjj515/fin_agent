# Fin-Agent Web 可视化系统 - 使用说明

## 快速开始

### 1. 安装依赖

```bash
cd web
pip install -r requirements.txt
```

### 2. 启动服务器

**Windows系统:**
```bash
# 方法1: 使用启动脚本
start.bat

# 方法2: 直接运行Python
python run.py
```

**Linux/Mac系统:**
```bash
# 方法1: 使用启动脚本
chmod +x start.sh
./start.sh

# 方法2: 直接运行Python
python3 run.py
```

### 3. 访问网页

打开浏览器，访问: **http://127.0.0.1:5000**

## 功能说明

### 主页（运行记录列表）

- 显示所有分析运行的记录
- 每个记录卡片显示：
  - 用户名
  - 运行时间戳
  - 交易次数
  - 胜率（绿色表示≥50%，红色表示<50%）
  - 平均收益率（绿色表示正收益，红色表示负收益）
- 点击"查看详情"按钮进入详细分析页面

### 详情页

包含以下内容：

1. **统计卡片**
   - 总交易数
   - 胜率
   - 平均收益
   - 平均Alpha

2. **绩效分析图表**
   - 胜率和平均收益的柱状图对比

3. **胜率分布饼图**
   - 不同分类和周期的胜率分布

4. **收益率分布直方图**
   - 交易收益率的分布情况

5. **绩效报告表格**
   - 详细的分类统计信息

6. **交易明细表格**
   - 显示前100条交易记录的详细信息

## 注意事项

1. **数据要求**: 确保 `outputs/` 目录下有分析结果文件
2. **文件格式**: 系统会自动识别符合命名规范的运行目录（格式：`用户名_年份_run_时间戳`）
3. **性能优化**: 交易明细表格最多显示1000条记录，详情页显示前100条
4. **浏览器兼容**: 推荐使用Chrome、Firefox、Edge等现代浏览器

## 故障排除

### 问题1: 无法启动服务器

**错误**: `ModuleNotFoundError: No module named 'flask'`

**解决**: 
```bash
pip install Flask pandas Werkzeug
```

### 问题2: 页面显示"暂无运行记录"

**原因**: `outputs/` 目录为空或不存在

**解决**: 先运行分析任务生成结果文件

### 问题3: 详情页数据加载失败

**原因**: 结果文件格式不正确或文件缺失

**解决**: 检查 `outputs/<run_id>/` 目录下是否有以下文件：
- `performance_report.csv`
- `backtest_results.csv`
- `full_report.md`

## 技术信息

- **框架**: Flask 3.0+
- **Python版本**: 3.8+
- **前端**: Bootstrap 5 + Chart.js
- **端口**: 5000（可在 `app.py` 中修改）
